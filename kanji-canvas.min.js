!function(e,r){"use strict";e.KanjiCanvas={},KanjiCanvas.refPatterns=[],KanjiCanvas.strokeColors=["#bf0000","#bf5600","#bfac00","#7cbf00","#26bf00","#00bf2f","#00bf85","#00a2bf","#004cbf","#0900bf","#5f00bf","#b500bf","#bf0072","#bf001c","#bf2626","#bf6b26","#bfaf26","#89bf26","#44bf26","#26bf4c","#26bf91","#26a8bf","#2663bf","#2d26bf","#7226bf","#b726bf","#bf2682","#bf263d","#bf4c4c","#bf804c"],KanjiCanvas.init=function(e){KanjiCanvas["canvas_"+e]=r.getElementById(e),KanjiCanvas["canvas_"+e].tabIndex=0,KanjiCanvas["ctx_"+e]=KanjiCanvas["canvas_"+e].getContext("2d"),KanjiCanvas["w_"+e]=KanjiCanvas["canvas_"+e].width,KanjiCanvas["h_"+e]=KanjiCanvas["canvas_"+e].height,KanjiCanvas["flagOver_"+e]=!1,KanjiCanvas["flagDown_"+e]=!1,KanjiCanvas["prevX_"+e]=0,KanjiCanvas["currX_"+e]=0,KanjiCanvas["prevY_"+e]=0,KanjiCanvas["currY_"+e]=0,KanjiCanvas["dot_flag_"+e]=!1,KanjiCanvas["recordedPattern_"+e]=[],KanjiCanvas["currentLine_"+e]=null,KanjiCanvas["canvas_"+e].addEventListener("mousemove",function(r){KanjiCanvas.findxy("move",r,e)},!1),KanjiCanvas["canvas_"+e].addEventListener("mousedown",function(r){KanjiCanvas.findxy("down",r,e)},!1),KanjiCanvas["canvas_"+e].addEventListener("mouseup",function(r){KanjiCanvas.findxy("up",r,e)},!1),KanjiCanvas["canvas_"+e].addEventListener("mouseout",function(r){KanjiCanvas.findxy("out",r,e)},!1),KanjiCanvas["canvas_"+e].addEventListener("mouseover",function(r){KanjiCanvas.findxy("over",r,e)},!1),KanjiCanvas["canvas_"+e].addEventListener("touchmove",function(r){KanjiCanvas.findxy("move",r,e)},!1),KanjiCanvas["canvas_"+e].addEventListener("touchstart",function(r){KanjiCanvas.findxy("down",r,e)},!1),KanjiCanvas["canvas_"+e].addEventListener("touchend",function(r){KanjiCanvas.findxy("up",r,e)},!1)},KanjiCanvas.draw=function(e,r){KanjiCanvas["ctx_"+e].beginPath(),KanjiCanvas["ctx_"+e].moveTo(KanjiCanvas["prevX_"+e],KanjiCanvas["prevY_"+e]),KanjiCanvas["ctx_"+e].lineTo(KanjiCanvas["currX_"+e],KanjiCanvas["currY_"+e]),KanjiCanvas["ctx_"+e].strokeStyle=r||"#333",KanjiCanvas["ctx_"+e].lineCap="round",KanjiCanvas["ctx_"+e].lineWidth=4,KanjiCanvas["ctx_"+e].stroke(),KanjiCanvas["ctx_"+e].closePath()},KanjiCanvas.deleteLast=function(e){KanjiCanvas["ctx_"+e].clearRect(0,0,KanjiCanvas["w_"+e],KanjiCanvas["h_"+e]);for(var r=0;r<KanjiCanvas["recordedPattern_"+e].length-1;r++)for(var t=KanjiCanvas["recordedPattern_"+e][r],n=0;n<t.length-1;n++)KanjiCanvas["prevX_"+e]=t[n][0],KanjiCanvas["prevY_"+e]=t[n][1],KanjiCanvas["currX_"+e]=t[n+1][0],KanjiCanvas["currY_"+e]=t[n+1][1],KanjiCanvas.draw(e);KanjiCanvas["recordedPattern_"+e].pop()},KanjiCanvas.erase=function(e){KanjiCanvas["ctx_"+e].clearRect(0,0,KanjiCanvas["w_"+e],KanjiCanvas["h_"+e]),KanjiCanvas["recordedPattern_"+e].length=0,r.querySelectorAll(".divTableCell").forEach(function(e){e.style.display="block"})},KanjiCanvas.findxy=function(e,r,t){var n=r.changedTouches?r.changedTouches[0]:null;if(n&&r.preventDefault(),"down"==e){var a=KanjiCanvas["canvas_"+t].getBoundingClientRect();KanjiCanvas["prevX_"+t]=KanjiCanvas["currX_"+t],KanjiCanvas["prevY_"+t]=KanjiCanvas["currY_"+t],KanjiCanvas["currX_"+t]=(n?n.clientX:r.clientX)-a.left,KanjiCanvas["currY_"+t]=(n?n.clientY:r.clientY)-a.top,KanjiCanvas["currentLine_"+t]=[],KanjiCanvas["currentLine_"+t].push([KanjiCanvas["currX_"+t],KanjiCanvas["currY_"+t]]),KanjiCanvas["flagDown_"+t]=!0,KanjiCanvas["flagOver_"+t]=!0,KanjiCanvas["dot_flag_"+t]=!0,KanjiCanvas["dot_flag_"+t]&&(KanjiCanvas["ctx_"+t].beginPath(),KanjiCanvas["ctx_"+t].fillRect(KanjiCanvas["currX_"+t],KanjiCanvas["currY_"+t],2,2),KanjiCanvas["ctx_"+t].closePath(),KanjiCanvas["dot_flag_"+t]=!1)}if("up"==e&&(KanjiCanvas["flagDown_"+t]=!1,!0==KanjiCanvas["flagOver_"+t]&&KanjiCanvas["recordedPattern_"+t].push(KanjiCanvas["currentLine_"+t])),"out"==e&&(KanjiCanvas["flagOver_"+t]=!1,!0==KanjiCanvas["flagDown_"+t]&&KanjiCanvas["recordedPattern_"+t].push(KanjiCanvas["currentLine_"+t]),KanjiCanvas["flagDown_"+t]=!1),"move"==e&&KanjiCanvas["flagOver_"+t]&&KanjiCanvas["flagDown_"+t]){var a=KanjiCanvas["canvas_"+t].getBoundingClientRect();KanjiCanvas["prevX_"+t]=KanjiCanvas["currX_"+t],KanjiCanvas["prevY_"+t]=KanjiCanvas["currY_"+t],KanjiCanvas["currX_"+t]=(n?n.clientX:r.clientX)-a.left,KanjiCanvas["currY_"+t]=(n?n.clientY:r.clientY)-a.top,KanjiCanvas["currentLine_"+t].push([KanjiCanvas["prevX_"+t],KanjiCanvas["prevY_"+t]]),KanjiCanvas["currentLine_"+t].push([KanjiCanvas["currX_"+t],KanjiCanvas["currY_"+t]]),KanjiCanvas.draw(t)}},KanjiCanvas.redraw=function(e){KanjiCanvas["ctx_"+e].clearRect(0,0,KanjiCanvas["w_"+e],KanjiCanvas["h_"+e]);for(var r=0;r<KanjiCanvas["recordedPattern_"+e].length;r++)for(var t=KanjiCanvas["recordedPattern_"+e][r],n=0;n<t.length-1;n++)KanjiCanvas["prevX_"+e]=t[n][0],KanjiCanvas["prevY_"+e]=t[n][1],KanjiCanvas["currX_"+e]=t[n+1][0],KanjiCanvas["currY_"+e]=t[n+1][1],KanjiCanvas.draw(e,KanjiCanvas.strokeColors[r]);if("false"!=KanjiCanvas["canvas_"+e].dataset.strokeNumbers)for(var r=0;r<KanjiCanvas["recordedPattern_"+e].length;r++){var t=KanjiCanvas["recordedPattern_"+e][r],a=t[Math.floor(t.length/2)][0]+5,o=t[Math.floor(t.length/2)][1]-5;KanjiCanvas["ctx_"+e].font="20px Arial",KanjiCanvas["ctx_"+e].lineWidth=3,KanjiCanvas["ctx_"+e].strokeStyle=KanjiCanvas.alterHex(KanjiCanvas.strokeColors[r]?KanjiCanvas.strokeColors[r]:"#333333",60,"dec"),KanjiCanvas["ctx_"+e].strokeText((r+1).toString(),a,o),KanjiCanvas["ctx_"+e].fillStyle=KanjiCanvas.strokeColors[r]?KanjiCanvas.strokeColors[r]:"#333",KanjiCanvas["ctx_"+e].fillText((r+1).toString(),a,o)}},KanjiCanvas.alterHex=function(e,r,t){for(var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),a=[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],o=0,i=a.length;o<i;o++){switch(t){case"inc":a[o]=(a[o]+r>255?255:a[o]+r).toString(16);break;case"dec":a[o]=(a[o]-r<0?0:a[o]-r).toString(16)}1==a[o].length&&(a[o]=a[o]+"0")}return"#"+a.join("")},KanjiCanvas.normalizeLinear=function(e){var r=[];KanjiCanvas.newHeight=256,KanjiCanvas.newWidth=256,KanjiCanvas.xMin=256,KanjiCanvas.xMax=0,KanjiCanvas.yMin=256,KanjiCanvas.yMax=0;for(var t=0;t<KanjiCanvas["recordedPattern_"+e].length;t++)for(var n=KanjiCanvas["recordedPattern_"+e][t],a=0;a<n.length;a++)KanjiCanvas.x=n[a][0],KanjiCanvas.y=n[a][1],KanjiCanvas.x<KanjiCanvas.xMin&&(KanjiCanvas.xMin=KanjiCanvas.x),KanjiCanvas.x>KanjiCanvas.xMax&&(KanjiCanvas.xMax=KanjiCanvas.x),KanjiCanvas.y<KanjiCanvas.yMin&&(KanjiCanvas.yMin=KanjiCanvas.y),KanjiCanvas.y>KanjiCanvas.yMax&&(KanjiCanvas.yMax=KanjiCanvas.y);KanjiCanvas.oldHeight=Math.abs(KanjiCanvas.yMax-KanjiCanvas.yMin),KanjiCanvas.oldWidth=Math.abs(KanjiCanvas.xMax-KanjiCanvas.xMin);for(var t=0;t<KanjiCanvas["recordedPattern_"+e].length;t++){for(var n=KanjiCanvas["recordedPattern_"+e][t],o=[],a=0;a<n.length;a++)KanjiCanvas.x=n[a][0],KanjiCanvas.y=n[a][1],KanjiCanvas.xNorm=(KanjiCanvas.x-KanjiCanvas.xMin)*(KanjiCanvas.newWidth/KanjiCanvas.oldWidth),KanjiCanvas.yNorm=(KanjiCanvas.y-KanjiCanvas.yMin)*(KanjiCanvas.newHeight/KanjiCanvas.oldHeight),o.push([KanjiCanvas.xNorm,KanjiCanvas.yNorm]);r.push(o)}KanjiCanvas["recordedPattern_"+e]=r,KanjiCanvas.redraw(e)},KanjiCanvas.m10=function(e){for(var r=0,t=0;t<e.length;t++)for(var n=e[t],a=0;a<n.length;a++)r+=n[a][0];return r},KanjiCanvas.m01=function(e){for(var r=0,t=0;t<e.length;t++)for(var n=e[t],a=0;a<n.length;a++)r+=n[a][1];return r},KanjiCanvas.m00=function(e){for(var r=0,t=0;t<e.length;t++)r+=e[t].length;return r},KanjiCanvas.mu20=function(e,r){for(var t=0,n=0;n<e.length;n++)for(var a=e[n],o=0;o<a.length;o++){var i=a[o][0]-r;t+=i*i}return t},KanjiCanvas.mu02=function(e,r){for(var t=0,n=0;n<e.length;n++)for(var a=e[n],o=0;o<a.length;o++){var i=a[o][1]-r;t+=i*i}return t},KanjiCanvas.aran=function(e,r){var t=0;return t=r>e?e/r:r/e,Math.sqrt(Math.sin(Math.PI/2*t))},KanjiCanvas.chopOverbounds=function(e){for(var r=[],t=0;t<e.length;t++){for(var n=e[t],a=[],o=0;o<n.length;o++){var i=n[o][0],c=n[o][1];i<0&&(i=0),i>=256&&(i=255),c<0&&(c=0),c>=256&&(c=255),a.push([i,c])}r.push(a)}return r},KanjiCanvas.transform=function(e,r,t){for(var n=[],a=0;a<e.length;a++){for(var o=e[a],i=[],c=0;c<o.length;c++){var f=o[c][0]+r,$=o[c][1]+t;i.push([f,$])}n.push(i)}return n},KanjiCanvas.momentNormalize=function(e){KanjiCanvas.newHeight=256,KanjiCanvas.newWidth=256,KanjiCanvas.xMin=256,KanjiCanvas.xMax=0,KanjiCanvas.yMin=256,KanjiCanvas.yMax=0;for(var r=0;r<KanjiCanvas["recordedPattern_"+e].length;r++)for(var t=KanjiCanvas["recordedPattern_"+e][r],n=0;n<t.length;n++)KanjiCanvas.x=t[n][0],KanjiCanvas.y=t[n][1],KanjiCanvas.x<KanjiCanvas.xMin&&(KanjiCanvas.xMin=KanjiCanvas.x),KanjiCanvas.x>KanjiCanvas.xMax&&(KanjiCanvas.xMax=KanjiCanvas.x),KanjiCanvas.y<KanjiCanvas.yMin&&(KanjiCanvas.yMin=KanjiCanvas.y),KanjiCanvas.y>KanjiCanvas.yMax&&(KanjiCanvas.yMax=KanjiCanvas.y);KanjiCanvas.oldHeight=Math.abs(KanjiCanvas.yMax-KanjiCanvas.yMin),KanjiCanvas.oldWidth=Math.abs(KanjiCanvas.xMax-KanjiCanvas.xMin);var a=KanjiCanvas.aran(KanjiCanvas.oldWidth,KanjiCanvas.oldHeight),o=KanjiCanvas.newWidth,i=KanjiCanvas.newHeight;KanjiCanvas.oldHeight>KanjiCanvas.oldWidth?o=a*KanjiCanvas.newWidth:i=a*KanjiCanvas.newHeight;for(var c=(KanjiCanvas.newWidth-o)/2,f=(KanjiCanvas.newHeight-i)/2,$=KanjiCanvas.m00(KanjiCanvas["recordedPattern_"+e]),l=KanjiCanvas.m01(KanjiCanvas["recordedPattern_"+e]),d=KanjiCanvas.m10(KanjiCanvas["recordedPattern_"+e])/$,s=l/$,u=o/2,v=i/2,h=KanjiCanvas.mu20(KanjiCanvas["recordedPattern_"+e],d),g=KanjiCanvas.mu02(KanjiCanvas["recordedPattern_"+e],s),_=o/(4*Math.sqrt(h/$))||0,x=i/(4*Math.sqrt(g/$))||0,p=[],r=0;r<KanjiCanvas["recordedPattern_"+e].length;r++){for(var m=KanjiCanvas["recordedPattern_"+e][r],b=[],n=0;n<m.length;n++){var y=_*(m[n][0]-d)+u,P=x*(m[n][1]-s)+v;b.push([y,P])}p.push(b)}return KanjiCanvas.transform(p,c,f)},KanjiCanvas.euclid=function(e,r){var t=e[0]-r[0],n=e[1]-r[1];return Math.sqrt(t*t+n*n)},KanjiCanvas.extractFeatures=function(e,r){for(var t=[],n=e.length,a=0;a<n;a++){for(var o=e[a],i=[],c=0,f=0;f<o.length;){if(0==f){var $=o[0];i.push($)}if(f>0){var $=o[f-1],l=o[f];c+=KanjiCanvas.euclid($,l)}if(c>=r&&f>1){c-=r;var $=o[f];i.push($)}f++}if(1==i.length){var $=o[o.length-1];i.push($)}else if(c>.75*r){var $=o[o.length-1];i.push($)}t.push(i)}return t},KanjiCanvas.endPointDistance=function(e,r){var t=0,n=void 0===e?0:e.length,a=void 0===r?0:r.length;if(0==n||0==a)return 0;var o=e[0],i=r[0];return t+=Math.abs(o[0]-i[0])+Math.abs(o[1]-i[1]),o=e[n-1],i=r[a-1],t+=Math.abs(o[0]-i[0])+Math.abs(o[1]-i[1])},KanjiCanvas.initialDistance=function(e,r){for(var t=e.length,n=r.length,a=Math.min(t,n),o=0,i=0;i<a;i++){var c=e[i],f=r[i];o+=Math.abs(c[0]-f[0])+Math.abs(c[1]-f[1])}return o*(Math.max(t,n)/a)},KanjiCanvas.getLargerAndSize=function(e,r){var t=void 0===e?0:e.length,n=void 0===r?0:r.length,a=t,o=n,i=e,c=r;return t<n&&(o=t,a=n,i=r,c=e),[i,c,a,o]},KanjiCanvas.wholeWholeDistance=function(e,r){for(var t=KanjiCanvas.getLargerAndSize(e,r),n=0,a=0;a<t[3];a++){KanjiCanvas.j_of_i=parseInt(parseInt(t[2]/t[3])*a);var o=t[0][KanjiCanvas.j_of_i],i=t[1][a];n+=Math.abs(o[0]-i[0])+Math.abs(o[1]-i[1])}return parseInt(n/t[3])},KanjiCanvas.initStrokeMap=function(e,r,t){for(var n=KanjiCanvas.getLargerAndSize(e,r),a=[],o=0;o<n[2];o++)a[o]=-1;for(var i=[],o=0;o<n[2];o++)i[o]=!0;for(var o=0;o<n[3];o++){KanjiCanvas.minDist=1e7,KanjiCanvas.min_j=-1;for(var c=0;c<n[2];c++)if(!0==i[c]){var f=t(n[0][c],n[1][o]);f<KanjiCanvas.minDist&&(KanjiCanvas.minDist=f,KanjiCanvas.min_j=c)}i[KanjiCanvas.min_j]=!1,a[KanjiCanvas.min_j]=o}return a},KanjiCanvas.getMap=function(e,r,t){for(var n=KanjiCanvas.getLargerAndSize(e,r),a=KanjiCanvas.initStrokeMap(n[0],n[1],t),o=0;o<3;o++)for(var i=0;i<a.length;i++)if(-1!=a[i]){KanjiCanvas.dii=t(n[0][i],n[1][a[i]]);for(var c=0;c<a.length;c++)if(-1!=a[i]){if(-1!=a[c]){var f=t(n[0][c],n[1][a[c]]),$=t(n[0][c],n[1][a[i]]);if(t(n[0][i],n[1][a[c]])+$<KanjiCanvas.dii+f){var l=a[c];a[c]=a[i],a[i]=l,KanjiCanvas.dii=$}}else{var $=t(n[0][c],n[1][a[i]]);$<KanjiCanvas.dii&&(a[c]=a[i],a[i]=-1,KanjiCanvas.dii=$)}}}return a},KanjiCanvas.completeMap=function(e,r,t,n){var a=KanjiCanvas.getLargerAndSize(e,r);if(!n.includes(-1))return n;for(var o=n[n.length],i=-1,c=n.length-1;c>=0;c--)if(-1==n[c])o=c;else{i=n[c];break}for(var c=o;c<n.length;c++)n[c]=i;for(var f=-1,$=-1,c=0;c<n.length;c++)if(-1==n[c])f=c;else{$=n[c];break}for(var c=0;c<=f;c++)n[c]=$;for(var c=0;c<n.length;c++)if(c+1<n.length&&-1==n[c+1]){for(var l=c,d=c+1;d<n.length&&-1==n[d];)d++;for(var s=l,u=1e6,v=l;v<d;v++){for(var h=a[0][l],g=l+1;g<=v;g++)h=h.concat(a[0][g]);for(var _=a[0][v+1],g=v+2;g<=d;g++)_=_.concat(a[0][g]);var x=t(h,a[1][n[l]]),p=t(_,a[1][n[d]]);x+p<u&&(s=v,u=x+p)}for(var v=l;v<=s;v++)n[v]=n[l];for(var v=s+1;v<d;v++)n[v]=n[d]}return n},KanjiCanvas.computeDistance=function(e,r,t,n){for(var a=KanjiCanvas.getLargerAndSize(e,r),o=0,i=0;i<a[2];){for(var c=a[1][n[i]],f=i,$=f+1;$<n.length&&n[$]==n[i];)$++;for(var l=a[0][f],d=f+1;d<$;d++)l=l.concat(a[0][d]);o+=t(c,l),i=$}return o},KanjiCanvas.computeWholeDistanceWeighted=function(e,r,t){for(var n=KanjiCanvas.getLargerAndSize(e,r),a=0,o=0;o<n[2];){for(var i=n[1][t[o]],c=o,f=c+1;f<t.length&&t[f]==t[o];)f++;for(var $=n[0][c],l=c+1;l<f;l++)$=$.concat(n[0][l]);var d=KanjiCanvas.wholeWholeDistance(i,$);if(f>c+1){var s=void 0===i?0:i.length,u=$.length;if(u<s){var l=u;u=s,s=l}d*=u/s}a+=d,o=f}return a},KanjiCanvas.coarseClassification=function(e){for(var r=e.length,t=[],n=0;n<KanjiCanvas.refPatterns.length;n++){var a=KanjiCanvas.refPatterns[n][1];if(r<a+2&&r>a-3){var o=KanjiCanvas.refPatterns[n][2],i=KanjiCanvas.getMap(o,e,KanjiCanvas.endPointDistance);i=KanjiCanvas.completeMap(o,e,KanjiCanvas.endPointDistance,i);var c=KanjiCanvas.computeDistance(o,e,KanjiCanvas.endPointDistance,i),f=a,$=o.length;if($<f){var l=$;$=f,f=l}t.push([n,c*(f/$)])}}return t.sort(function(e,r){return e[1]-r[1]}),t},KanjiCanvas.fineClassification=function(e,r){for(var t=e.length,n=[],a=0;a<Math.min(r.length,100);a++){var o=r[a][0],i=KanjiCanvas.refPatterns[o][1],c=KanjiCanvas.refPatterns[o][2];if(t<i+2&&t>i-3){var f=KanjiCanvas.getMap(c,e,KanjiCanvas.initialDistance);f=KanjiCanvas.completeMap(c,e,KanjiCanvas.wholeWholeDistance,f),"委"==KanjiCanvas.refPatterns[o][0]&&(console.log("finished imap, fine:"),console.log(f),console.log("weight:"),console.log(KanjiCanvas.computeDistance(c,e,KanjiCanvas.wholeWholeDistance,f)),console.log("weight intended:"),console.log(KanjiCanvas.computeDistance(c,e,KanjiCanvas.wholeWholeDistance,[0,1,2,3,4,7,5,6])));var $=KanjiCanvas.computeWholeDistanceWeighted(c,e,f),l=t,d=c.length;d>l&&(d=l),$/=d,n.push([o,$])}}n.sort(function(e,r){return e[1]-r[1]});for(var s="",a=0;a<Math.min(n.length,10);a++)s+=KanjiCanvas.refPatterns[n[a][0]][0],s+="  ";return s},KanjiCanvas.recognize=function(e){var t=KanjiCanvas.momentNormalize(e),n=KanjiCanvas.extractFeatures(t,20),a=KanjiCanvas.getMap(n,KanjiCanvas.refPatterns[0][2],KanjiCanvas.endPointDistance);a=KanjiCanvas.completeMap(n,KanjiCanvas.refPatterns[0][2],KanjiCanvas.endPointDistance,a);var o=KanjiCanvas.coarseClassification(n);KanjiCanvas.redraw(e);var i=KanjiCanvas.fineClassification(n,o);r.querySelectorAll(".divTableCell").forEach(function(e){var r=e.querySelector(".kanji").textContent.trim(),t=i.includes(r);e.style.display=t?"block":"none"})},KanjiCanvas.copyStuff=function(e){KanjiCanvas.s="";for(var r=0,t=KanjiCanvas["recordedPattern_"+e].length;r<t;r++)console.log(r+1,KanjiCanvas["recordedPattern_"+e][r],KanjiCanvas["recordedPattern_"+e][r].toString()),console.log(KanjiCanvas["recordedPattern_"+e][r]),console.log(JSON.stringify(KanjiCanvas["recordedPattern_"+e][r])),KanjiCanvas.s+="["+JSON.stringify(KanjiCanvas["recordedPattern_"+e][r])+"],";KanjiCanvas.copyToClipboard(KanjiCanvas.s)},KanjiCanvas.copyToClipboard=function(e){var t=r.createElement("textarea");t.value=e,r.body.appendChild(t),t.select(),r.execCommand("copy"),r.body.removeChild(t)},r.addEventListener("keydown",function(e){var t=r.activeElement.id;if(KanjiCanvas["canvas_"+t]&&e.ctrlKey)switch(e.key.toLowerCase()){case"z":e.preventDefault(),KanjiCanvas.deleteLast(t);break;case"x":e.preventDefault(),KanjiCanvas.erase(t);break;case"f":e.preventDefault(),KanjiCanvas.recognize(t)}})}(window,document);